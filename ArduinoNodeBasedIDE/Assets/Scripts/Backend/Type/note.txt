Add adapter check + ut
Maybe rewrite this to singleton types?